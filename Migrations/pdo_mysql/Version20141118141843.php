<?php

namespace UJM\ExoBundle\Migrations\pdo_mysql;

use Doctrine\DBAL\Migrations\AbstractMigration;
use Doctrine\DBAL\Schema\Schema;

/**
 * Auto-generated migration based on mapping information: modify it with caution
 *
 * Generation date: 2014/11/18 02:18:51
 */
class Version20141118141843 extends AbstractMigration
{
    public function up(Schema $schema)
    {
        $this->addSql("
            ALTER TABLE ujm_paper 
            ADD mark DOUBLE PRECISION DEFAULT NULL
        ");

		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 1), ';', -1), 1 FROM ujm_paper WHERE SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 1), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 2), ';', -1), 2 FROM ujm_paper WHERE SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 2), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 3), ';', -1), 3 FROM ujm_paper WHERE exercise_id NOT IN (11) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 3), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 4), ';', -1), 4 FROM ujm_paper WHERE exercise_id NOT IN (11) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 4), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 5), ';', -1), 5 FROM ujm_paper WHERE exercise_id NOT IN (11,90) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 5), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 6), ';', -1), 6 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 6), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 7), ';', -1), 7 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 7), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 8), ';', -1), 8 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 8), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 9), ';', -1), 9 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 9), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 10), ';', -1), 10 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 10), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 11), ';', -1), 11 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 11), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 12), ';', -1), 12 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 12), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 13), ';', -1), 13 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 13), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 14), ';', -1), 14 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 14), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 15), ';', -1), 15 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 15), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 16), ';', -1), 16 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 16), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 17), ';', -1), 17 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 17), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 18), ';', -1), 18 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 18), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 19), ';', -1), 19 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 19), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 20), ';', -1), 20 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 20), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 21), ';', -1), 21 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 21), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 22), ';', -1), 22 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 22), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 23), ';', -1), 23 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 23), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 24), ';', -1), 24 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 24), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 25), ';', -1), 25 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 25), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 26), ';', -1), 26 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 26), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 27), ';', -1), 27 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 27), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 28), ';', -1), 28 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 28), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 29), ';', -1), 29 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 29), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 30), ';', -1), 30 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 30), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 31), ';', -1), 31 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 31), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 32), ';', -1), 32 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 32), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 33), ';', -1), 33 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 33), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 34), ';', -1), 34 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 34), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 35), ';', -1), 35 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 35), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 36), ';', -1), 36 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 36), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 37), ';', -1), 37 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 37), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 38), ';', -1), 38 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 38), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 39), ';', -1), 39 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 39), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 40), ';', -1), 40 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 40), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 41), ';', -1), 41 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 41), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 42), ';', -1), 42 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 42), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 43), ';', -1), 43 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 43), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 44), ';', -1), 44 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 44), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 45), ';', -1), 45 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 45), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 46), ';', -1), 46 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 46), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 47), ';', -1), 47 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 47), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 48), ';', -1), 48 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 48), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 49), ';', -1), 49 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 49), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 50), ';', -1), 50 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 50), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 51), ';', -1), 51 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 51), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 52), ';', -1), 52 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 52), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 53), ';', -1), 53 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 53), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 54), ';', -1), 54 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 54), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 55), ';', -1), 55 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 55), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 56), ';', -1), 56 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 56), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 57), ';', -1), 57 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 57), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 58), ';', -1), 58 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 58), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 59), ';', -1), 59 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 59), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 60), ';', -1), 60 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 60), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 61), ';', -1), 61 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 61), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 62), ';', -1), 62 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 62), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 63), ';', -1), 63 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 63), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 64), ';', -1), 64 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 64), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 65), ';', -1), 65 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 65), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 66), ';', -1), 66 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 66), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 67), ';', -1), 67 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 67), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 68), ';', -1), 68 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 68), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 69), ';', -1), 69 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 69), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 70), ';', -1), 70 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 70), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 71), ';', -1), 71 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 71), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 72), ';', -1), 72 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 72), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 73), ';', -1), 73 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 73), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 74), ';', -1), 74 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 74), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 75), ';', -1), 75 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 75), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 76), ';', -1), 76 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 76), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 77), ';', -1), 77 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 77), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 78), ';', -1), 78 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 78), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 79), ';', -1), 79 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 79), ';', -1) != '';");
		$this->addSql("INSERT INTO ujm_paper_question (paper_id, question_id, ordre) SELECT id, SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 80), ';', -1), 80 FROM ujm_paper WHERE exercise_id NOT IN (11,90,14,15,17,20,23,29,32,74,33,75,36,38,69,51,63,77,89,81,57,59,60,65,68,114,123,128,134,78,50,84,54,56,72,26,96,98,111,105,110) AND SUBSTRING_INDEX(SUBSTRING_INDEX(ordre_question, ';', 80), ';', -1) != '';");


		$this->addSql("UPDATE ujm_paper SET mark = (SELECT (mark2 * 20) / score2 AS realScore FROM (SELECT paper_id AS id, SUM(mark) AS mark2, SUM(score) AS score2 FROM (SELECT p.id AS paper_id, (CASE WHEN r.mark IS NOT NULL THEN r.mark ELSE 0 END) AS mark, CASE WHEN iq.weight_response = 1 THEN SUM(c.right_response) ELSE iq.score_right_response END AS score FROM ujm_paper AS p JOIN ujm_paper_question AS pq ON pq.paper_id = p.id JOIN ujm_question AS q ON q.id = pq.question_id JOIN ujm_interaction AS i ON i.question_id = q.id JOIN ujm_interaction_qcm AS iq ON iq.interaction_id = q.id JOIN ujm_choice AS c ON c.interaction_qcm_id = iq.id LEFT JOIN ujm_response AS r ON r.paper_id = p.id AND r.interaction_id = i.id GROUP BY p.id, iq.id) AS t1 GROUP BY paper_id) AS t2 WHERE id = ujm_paper.id);");
    }

    public function down(Schema $schema)
    {
        $this->addSql("
            ALTER TABLE ujm_paper 
            DROP mark
        ");
    }
}
